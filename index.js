(()=>{function a(){var v="f_"+(Math.floor(4294967296*Math.random())+"");return s[v]?a():(s[v]=!0,r+=1,v)}function b(){for(var v in u[p]=j.textContent,u){var x=t[v];localStorage.setItem(x+"name",v),localStorage.setItem(x,u[v])}var y=[];for(var A in s)null!=s[A]&&y.push(A);0<y.length&&localStorage.setItem("f",y.join(" "))}function d(){u[p]=localStorage.getItem(t[p])}function e(){u[p]=null}function g(){1>i.value.length||64<i.value.length||(k.textContent="Close",i.disabled=!0,l.disabled=!1,m.disabled=!1,p=i.value,q=!0,j.contentEditable=!0,d(),null==t[p]&&(t[p]=a(),u[p]=""),j.textContent=u[p],j.focus())}function h(){if(q&&(n.checked&&b(),e()),k.textContent="Open",i.disabled=!1,l.disabled=!0,m.disabled=!0,p="",q=!1,j.contentEditable=!1,j.textContent="Files ("+r+")",0<r)for(var v in j.textContent+=":\r\n",t)null!=t[v]&&(j.textContent+=" "+v+"\r\n");i.focus()}var i=document.getElementById("name"),j=document.getElementById("editor"),k=document.getElementById("openclose"),l=document.getElementById("save"),m=document.getElementById("delete"),n=document.getElementById("saveclose"),o=!0;if(null==localStorage)o=!1;else try{localStorage.setItem("test","test"),localStorage.removeItem("test")}catch(v){o=!1}if(!o)return void(j.textContent="Local storage is required for functionality!");k.disabled=!1,n.disabled=!1;var p="",q=!1,r=0,s={},t={},u={};(function(){var v=localStorage.getItem("f");if(null==v)return void localStorage.clear();var x=v.split(" ");for(var y in x)s[x[y]]=!0;for(var A in r=x.length,s){var B=localStorage.getItem(A+"name");t[B]=A}})(),h(),i.addEventListener("keyup",v=>{"Enter"==v.key&&g()}),k.addEventListener("click",()=>{q?h():g()}),l.addEventListener("click",()=>{}),m.addEventListener("click",()=>{q&&(s[t[p]]=null,r-=1,t[p]=null,u[p]=null,h())})})();
